обязательно нужно нормальизовать таблицу
Имя не должно быть одной ячейкой. Нужно отдельно делать fname, lname, second_name
дата не должна быть в юникстайм, это имеет смысл для хранения токенов, например, но не даты. дата пусть будет в формате даты.

вот таким запросом мы вытащим все количества номеров в данном диапазоне 
select u.name, count(p.phone) as phone_count from user u join phone_numbers p on u.id=p.user_id where u.gender = 2 and year(u.birth_date) between year(now()) - 22 and year(now()) - 18 group by u.name;

2.
применены паттерны характерные для ORM доктрины:
Entity
Repository
Builder
etc.


3.
во-первых, нужно убрать главное подключение к базе через цикл. Подключение к базе должно быть выделенно и выполнятся один раз.
Внутри цикла подключение вызывает излишнюю трату ресурсов базы данных и снижение производительности. Такой доступ считается несанкционированным по практикам разработки. 

во-вторых, нужно защитится от SQL-инъекции вот в этом месте:
$sql = mysqli_query($db, "SELECT * FROM users WHERE id=$user_id");

в-третьих, нужно организовать проверки входных данных. Входные данные могут быть пустые или не те. Это все должно быть предусмотренно кодом.

в-четвертых, сам факт того, что пользователь может получить данные других пользователей, должен как-то отражаться в системе авторизации и аутентификации. Очевидно, что такой пользователь должен быть в статусе-роле ['ADMIN'] или что-то типа того. Любой пользователь не должен видеть данные других пользователей. Это нарушение конфиденциальности

я разрабатывал изначально в концепциях Симфони, поэтому и проще сделать тот же функционал через Доктрину. У нас ведь цель - получение по входным данным айди - юзеров.
вот ссылка на код:
src/Repository/UserRepository;

но если нужно сделать средствами PDO mysql
то вот примерный вариант:
src/Repository/PdoUsers.php


